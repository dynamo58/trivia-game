<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Room</title>
</head>
<body>
	<p id="output"></p>
	<script>
		const loc = window.location;
		const room_id = loc.toString().split("/")[loc.toString().split("/").length-1];
		let uri = "ws:";
		if (loc.protocol === "https:") { 
			uri = "wss:"; 
		}
		
		uri += "//" + loc.host;
		uri += "/ws/" + room_id;
		console.log(uri);
		const ws = new WebSocket(uri);
		ws.onopen = function () {
			console.log("Connected");
		}
		
		ws.onmessage = function (evt) {
			let out = document.getElementById("output");
			out.innerHTML += evt.data + "<br>";
		}
		
		setInterval(function () { ws.send("Hello, Server!"); }, 1000); 
	</script>
</body>
</html>